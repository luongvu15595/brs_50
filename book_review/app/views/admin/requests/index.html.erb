<% provide :title, t(".all_requests") %>
<h1><%= t ".all_requests" %></h1>

<div class="row">
  <div class="col-md-12">
    <table class="table table-bordered">
      <thead>
        <tr class="info">
          <th class="center"><%= t ".book_name" %></th>
          <th class="center"><%= t ".user" %></th>
          <th></th>
        </tr>
      </thead>
      <tbody>
        <% @requests.each do |request| %>
          <tr>
            <% if request.accept? || request.pending? %>
              <td><%= request.name_book %></td>
              <td><%= request.user.name %></td>
              <td class="center">
                <% if request.pending? %>
                  <%= form_for [:admin, request], html: {multipart: true} do |f| %>
                    <%= f.button t(".accept"), type: :submit, name: :status,
                      value: :accept, class: "btn btn-size btn-success" %>
                    <%= f.button t(".refuse"), type: :submit, name: :status,
                      value: :refuse, class: "btn btn-size btn-danger" %>
                  <% end %>
                <% elsif request.accept? %>
                  <h4><span class="label label-success"><% t".accept" %></span></h4>
                <% end %>
                </td>  
              <% end %>
          </tr>
        <% end %>
      </tbody>
    </table>
  </div>
</div>
